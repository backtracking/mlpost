<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>MetaPath (mlpost.Mlpost.MetaPath)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">mlpost</a> &#x00BB; <a href="../index.html">Mlpost</a> &#x00BB; MetaPath</nav><h1>Module <code>Mlpost.MetaPath</code></h1><p>MetaPaths: gradually build a path with constraints, get a real path at thxe end.</p><nav class="toc"><ul><li><a href="#labelled-metapath-constructors">Labelled metapath constructors</a></li><li><a href="#primitive-metapath-constructors">Primitive metapath constructors</a></li><li><a href="#predefined-values">Predefined values</a></li><li><a href="#conversions">Conversions</a></li></ul></nav></header><aside><p>MetaPaths are the objects used to describe lines, curves, and more generally almost everything that is drawn with Mlpost. A path (<code>Path.t</code>) is defined by points and control points. A metapath is defined by points (knots) and constraints on the links between the points. A metapath is an easy way to define a path gradually with only a few points, and apply heuristics afterwards to transform it into a real path (using <code>of_metapath</code>).</p></aside><dl><dt class="spec type" id="type-direction"><a href="#type-direction" class="anchor"></a><code><span class="keyword">type</span> direction</code><code> = <a href="../Path/index.html#type-direction">Path.direction</a></code></dt><dd><p>A <code>direction</code> is used to put constraints on metapaths:</p><ul><li><code>vec p</code> defines a direction by a point (interpreted as a vector)</li><li><code>curl f</code> changes the curling factor of the extremity of a metapath; higher curling factor means flatter curves</li><li><code>noDir</code> means no particular direction</li></ul></dd></dl><dl><dt class="spec value" id="val-vec"><a href="#val-vec" class="anchor"></a><code><span class="keyword">val</span> vec : <a href="../Point/index.html#type-t">Point.t</a> <span>&#45;&gt;</span> <a href="index.html#type-direction">direction</a></code></dt><dt class="spec value" id="val-curl"><a href="#val-curl" class="anchor"></a><code><span class="keyword">val</span> curl : float <span>&#45;&gt;</span> <a href="index.html#type-direction">direction</a></code></dt><dt class="spec value" id="val-noDir"><a href="#val-noDir" class="anchor"></a><code><span class="keyword">val</span> noDir : <a href="index.html#type-direction">direction</a></code></dt></dl><dl><dt class="spec type" id="type-knot"><a href="#type-knot" class="anchor"></a><code><span class="keyword">type</span> knot</code><code> = <a href="../Path/index.html#type-knot">Path.knot</a></code></dt><dd><p>A <code>knot</code> is the basic element of a metapath, and is simply a point with an incoming and outgoing direction constraint</p></dd></dl><dl><dt class="spec value" id="val-knotp"><a href="#val-knotp" class="anchor"></a><code><span class="keyword">val</span> knotp : <span>?&#8288;l:<a href="index.html#type-direction">direction</a></span> <span>&#45;&gt;</span> <span>?&#8288;r:<a href="index.html#type-direction">direction</a></span> <span>&#45;&gt;</span> <a href="../Point/index.html#type-t">Point.t</a> <span>&#45;&gt;</span> <a href="index.html#type-knot">knot</a></code></dt><dd><p>Build a knot from a point; the optional arguments are the incoming directions.Warning they are going in the same direction.</p></dd></dl><dl><dt class="spec value" id="val-knotlist"><a href="#val-knotlist" class="anchor"></a><code><span class="keyword">val</span> knotlist : <span><span>(<a href="index.html#type-direction">direction</a> * <a href="../Point/index.html#type-t">Point.t</a> * <a href="index.html#type-direction">direction</a>)</span> list</span> <span>&#45;&gt;</span> <span><a href="index.html#type-knot">knot</a> list</span></code></dt></dl><dl><dt class="spec type" id="type-joint"><a href="#type-joint" class="anchor"></a><code><span class="keyword">type</span> joint</code><code> = <a href="../Path/index.html#type-joint">Path.joint</a></code></dt><dd><p>A joint is the connection between two knots in a metapath. It is either</p><ul><li><code>jLine</code> for a straight line</li><li><code>jCurve</code> for a spline curve</li><li><code>jCurveNoInflex</code> to avoid inflexion points</li><li><code>jTension f1 f2</code> to specify &quot;tension&quot; on the joint; <code>jCurve</code> uses a default tension of 1. Higher tension means less &quot;wild&quot; curves</li><li><code>jControls p1 p2</code> to explicitely specify control points</li></ul></dd></dl><dl><dt class="spec value" id="val-jLine"><a href="#val-jLine" class="anchor"></a><code><span class="keyword">val</span> jLine : <a href="index.html#type-joint">joint</a></code></dt><dt class="spec value" id="val-jCurve"><a href="#val-jCurve" class="anchor"></a><code><span class="keyword">val</span> jCurve : <a href="index.html#type-joint">joint</a></code></dt><dt class="spec value" id="val-jCurveNoInflex"><a href="#val-jCurveNoInflex" class="anchor"></a><code><span class="keyword">val</span> jCurveNoInflex : <a href="index.html#type-joint">joint</a></code></dt><dt class="spec value" id="val-jTension"><a href="#val-jTension" class="anchor"></a><code><span class="keyword">val</span> jTension : float <span>&#45;&gt;</span> float <span>&#45;&gt;</span> <a href="index.html#type-joint">joint</a></code></dt><dt class="spec value" id="val-jControls"><a href="#val-jControls" class="anchor"></a><code><span class="keyword">val</span> jControls : <a href="../Point/index.html#type-t">Point.t</a> <span>&#45;&gt;</span> <a href="../Point/index.html#type-t">Point.t</a> <span>&#45;&gt;</span> <a href="index.html#type-joint">joint</a></code></dt></dl><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>The abstract type of metapaths</p></dd></dl><dl><dt class="spec type" id="type-path"><a href="#type-path" class="anchor"></a><code><span class="keyword">type</span> path</code><code> = <a href="../Path/index.html#type-t">Path.t</a></code></dt></dl><aside><p>In all the functions below :</p><ul><li>noDir is the default direction</li><li>jCurve is the default joint</li></ul></aside><section><header><h3 id="labelled-metapath-constructors"><a href="#labelled-metapath-constructors" class="anchor"></a>Labelled metapath constructors</h3></header><dl><dt class="spec value" id="val-knot"><a href="#val-knot" class="anchor"></a><code><span class="keyword">val</span> knot : <span>?&#8288;l:<a href="index.html#type-direction">direction</a></span> <span>&#45;&gt;</span> <span>?&#8288;r:<a href="index.html#type-direction">direction</a></span> <span>&#45;&gt;</span> <span>?&#8288;scale:<span>(float <span>&#45;&gt;</span> <a href="../Num/index.html#type-t">Num.t</a>)</span></span> <span>&#45;&gt;</span> <span>(float * float)</span> <span>&#45;&gt;</span> <a href="index.html#type-knot">knot</a></code></dt><dd><p>Build a knot from a pair of floats</p><dl><dt>parameter l</dt><dd><p>an incoming direction</p></dd></dl><dl><dt>parameter r</dt><dd><p>an outgoing direction</p></dd></dl><dl><dt>parameter scale</dt><dd><p>a scaling factor applied to the floats</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-knotn"><a href="#val-knotn" class="anchor"></a><code><span class="keyword">val</span> knotn : <span>?&#8288;l:<a href="index.html#type-direction">direction</a></span> <span>&#45;&gt;</span> <span>?&#8288;r:<a href="index.html#type-direction">direction</a></span> <span>&#45;&gt;</span> <span>(<a href="../Num/index.html#type-t">Num.t</a> * <a href="../Num/index.html#type-t">Num.t</a>)</span> <span>&#45;&gt;</span> <a href="index.html#type-knot">knot</a></code></dt><dd><p>Build a knot from a Num.t pair; the optional arguments are as in <a href="index.html#type-knot"><code>knot</code></a></p></dd></dl><dl><dt class="spec value" id="val-path"><a href="#val-path" class="anchor"></a><code><span class="keyword">val</span> path : <span>?&#8288;style:<a href="index.html#type-joint">joint</a></span> <span>&#45;&gt;</span> <span>?&#8288;scale:<span>(float <span>&#45;&gt;</span> <a href="../Num/index.html#type-t">Num.t</a>)</span></span> <span>&#45;&gt;</span> <span><span>(float * float)</span> list</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Build a metapath from a list of pairs of floats</p><dl><dt>parameter style</dt><dd><p>the joint style used for all joints in the metapath</p></dd></dl><dl><dt>parameter cycle</dt><dd><p>if given, the metapath is closed using the given style</p></dd></dl><dl><dt>parameter scale</dt><dd><p>permits to scale the whole metapath</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-pathn"><a href="#val-pathn" class="anchor"></a><code><span class="keyword">val</span> pathn : <span>?&#8288;style:<a href="index.html#type-joint">joint</a></span> <span>&#45;&gt;</span> <span><span>(<a href="../Num/index.html#type-t">Num.t</a> * <a href="../Num/index.html#type-t">Num.t</a>)</span> list</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Same as <code>metapath</code>, but uses a <code>Num.t</code> list</p></dd></dl><dl><dt class="spec value" id="val-pathk"><a href="#val-pathk" class="anchor"></a><code><span class="keyword">val</span> pathk : <span>?&#8288;style:<a href="index.html#type-joint">joint</a></span> <span>&#45;&gt;</span> <span><a href="index.html#type-knot">knot</a> list</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Same as <code>metapath</code>, but uses a knot list</p></dd></dl><dl><dt class="spec value" id="val-pathp"><a href="#val-pathp" class="anchor"></a><code><span class="keyword">val</span> pathp : <span>?&#8288;style:<a href="index.html#type-joint">joint</a></span> <span>&#45;&gt;</span> <span><a href="../Point/index.html#type-t">Point.t</a> list</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Same as <code>metapath</code> but uses a point list</p></dd></dl><dl><dt class="spec value" id="val-jointpathk"><a href="#val-jointpathk" class="anchor"></a><code><span class="keyword">val</span> jointpathk : <span><a href="index.html#type-knot">knot</a> list</span> <span>&#45;&gt;</span> <span><a href="index.html#type-joint">joint</a> list</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Build a metapath from <code>n</code> knots and <code>n-1</code> joints</p></dd></dl><dl><dt class="spec value" id="val-jointpathp"><a href="#val-jointpathp" class="anchor"></a><code><span class="keyword">val</span> jointpathp : <span><a href="../Point/index.html#type-t">Point.t</a> list</span> <span>&#45;&gt;</span> <span><a href="index.html#type-joint">joint</a> list</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Build a metapath from <code>n</code> points and <code>n-1</code> joints, with default directions</p></dd></dl><dl><dt class="spec value" id="val-jointpathn"><a href="#val-jointpathn" class="anchor"></a><code><span class="keyword">val</span> jointpathn : <span><span>(<a href="../Num/index.html#type-t">Num.t</a> * <a href="../Num/index.html#type-t">Num.t</a>)</span> list</span> <span>&#45;&gt;</span> <span><a href="index.html#type-joint">joint</a> list</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-jointpath"><a href="#val-jointpath" class="anchor"></a><code><span class="keyword">val</span> jointpath : <span>?&#8288;scale:<span>(float <span>&#45;&gt;</span> <a href="../Num/index.html#type-t">Num.t</a>)</span></span> <span>&#45;&gt;</span> <span><span>(float * float)</span> list</span> <span>&#45;&gt;</span> <span><a href="index.html#type-joint">joint</a> list</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Build a metapath from <code>n</code> float_pairs and <code>n-1</code> joints, with default directions</p></dd></dl><dl><dt class="spec value" id="val-cycle"><a href="#val-cycle" class="anchor"></a><code><span class="keyword">val</span> cycle : <span>?&#8288;dir:<a href="index.html#type-direction">direction</a></span> <span>&#45;&gt;</span> <span>?&#8288;style:<a href="index.html#type-joint">joint</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-path">path</a></code></dt><dd><p>Close a metapath using direction <code>dir</code> and style <code>style</code></p></dd></dl></section><section><header><h3 id="primitive-metapath-constructors"><a href="#primitive-metapath-constructors" class="anchor"></a>Primitive metapath constructors</h3></header><dl><dt class="spec value" id="val-concat"><a href="#val-concat" class="anchor"></a><code><span class="keyword">val</span> concat : <span>?&#8288;style:<a href="index.html#type-joint">joint</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-knot">knot</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Add a knot at the end of a metapath</p></dd></dl><dl><dt class="spec value" id="val-start"><a href="#val-start" class="anchor"></a><code><span class="keyword">val</span> start : <a href="index.html#type-knot">knot</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Create a simple metapath with one knot</p></dd></dl><dl><dt class="spec value" id="val-append"><a href="#val-append" class="anchor"></a><code><span class="keyword">val</span> append : <span>?&#8288;style:<a href="index.html#type-joint">joint</a></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Append a metapath to another using joint <code>style</code></p></dd></dl></section><section><header><h3 id="predefined-values"><a href="#predefined-values" class="anchor"></a>Predefined values</h3></header><dl><dt class="spec value" id="val-defaultjoint"><a href="#val-defaultjoint" class="anchor"></a><code><span class="keyword">val</span> defaultjoint : <a href="index.html#type-joint">joint</a></code></dt><dd><p>The default joint style (<code>JCurve</code>)</p></dd></dl></section><section><header><h3 id="conversions"><a href="#conversions" class="anchor"></a>Conversions</h3></header><dl><dt class="spec value" id="val-to_path"><a href="#val-to_path" class="anchor"></a><code><span class="keyword">val</span> to_path : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-path">path</a></code></dt><dd><p>Compute the control point of the path for a good looking result according to the constraint on the direction, tension, curve</p></dd></dl><dl><dt class="spec value" id="val-of_path"><a href="#val-of_path" class="anchor"></a><code><span class="keyword">val</span> of_path : <a href="index.html#type-path">path</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Obtain a metapath from a path with exactly the same control point. p = of_metapath (of_path p) is true but not the opposite.</p></dd></dl></section></div></body></html>